(this["webpackJsonplive-at-steam"]=this["webpackJsonplive-at-steam"]||[]).push([[0],{128:function(e,t,a){e.exports=a(259)},253:function(e,t,a){e.exports=a.p+"static/media/logo.72b2a429.svg"},255:function(e,t,a){e.exports=a.p+"static/media/kid-boy.9cb10d95.png"},256:function(e,t,a){e.exports=a.p+"static/media/nophoto.b05bae62.svg"},257:function(e,t,a){},259:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(5),l=a.n(r),i=(a(133),a(2)),c=a(9),u=a(269),s=a(127),m=a(125),d=a.n(m);function g(){var e=o.a.useState({isLoggedIn:!1}),t=Object(c.a)(e,2),a=t[0],n=t[1],r=Object(u.a)(["live-site-jwt"]),l=Object(c.a)(r,1)[0];return o.a.useEffect((function(){var e=l["live-site-jwt"];if(e)try{var t=d()(e);n(Object(s.a)({isLoggedIn:!0,jwtToken:e},t))}catch(a){console.error(a),console.log("Failed to decode jwt token from cookies")}else n({isLoggedIn:!1})}),[l]),a}function p(){var e=o.a.useState(!1),t=Object(c.a)(e,2),a=(t[0],t[1],o.a.useState(!1)),n=Object(c.a)(a,2),r=n[0],l=n[1],s=o.a.useState(""),m=Object(c.a)(s,2),d=m[0],p=m[1],h=o.a.useState(""),f=Object(c.a)(h,2),E=f[0],v=f[1],b=Object(u.a)(["live-site-jwt"]),x=Object(c.a)(b,3),y=(x[0],x[1]),w=x[2],N=g();return N.isLoggedIn?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"u-marginRightExtraSmall"},null===N||void 0===N?void 0:N.username),o.a.createElement(i.Dropdown,{alignRight:!0,id:"profile"},o.a.createElement(i.Dropdown.Toggle,{className:"u-textLight u-lineHeightNone"},o.a.createElement(i.Icon,{name:"contact",size:"medium"})),o.a.createElement(i.Dropdown.Container,{className:"u-paddingVerticalExtraSmall"},o.a.createElement(i.Dropdown.Item,{role:"button",onClick:function(){w("live-site-jwt",{path:"/"})},id:"header-logout-button"},o.a.createElement(i.Icon,{name:"power",size:"small"}),o.a.createElement("span",{className:"u-marginLeftExtraSmall"},"\u0110\u0103ng xu\u1ea5t"))))):o.a.createElement(o.a.Fragment,null,o.a.createElement(i.Form.Input,{type:"text",placeholder:"Email",className:"u-marginRightExtraSmall",value:d,onChange:function(e){return p(e.target.value)},isInvalid:r}),o.a.createElement(i.Form.Input,{type:"password",placeholder:"M\u1eadt kh\u1ea9u",className:"u-marginRightExtraSmall",value:E,onChange:function(e){return v(e.target.value)},isInvalid:r}),o.a.createElement(i.Button,{variant:"accent",onClick:function(e){e.preventDefault(),l(!1),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:E})}).then((function(e){return e.json()})).then((function(e){1==e.status?(y("live-site-jwt",e.access_token,{path:"/"}),l(!1)):l(!0)})).catch((function(e){return console.log(e)}))}},o.a.createElement(i.Button.Label,{className:"u-textDark u-textNoWrap"},"\u0110\u0103ng nh\u1eadp")),r&&o.a.createElement(i.Form.Feedback,{type:"invalid",visible:!0},"Sai username ho\u1eb7c m\u1eadt kh\u1ea9u!"))}function h(){return o.a.createElement(i.Header,{fullWidth:!0},o.a.createElement(i.Header.Brand,null,o.a.createElement(i.Logo,{as:i.SafeAnchor,src:a(253),height:42})),o.a.createElement(i.Header.Main,null,o.a.createElement(i.Header.Left,{className:"u-alignItemsCenter"},o.a.createElement("div",{className:"u-fontMedium u-text500"},"B\xe0i h\u1ecdc s\u1ed1 1:"),o.a.createElement("div",{className:"u-marginHorizontalTiny u-textGray u-text500"},"C\xe1 n\u01b0\u1edbng c\u1ee7a Miu \u0111\xe2u r\u1ed3i?"),o.a.createElement("div",null,o.a.createElement(i.Badge,{variant:"primary_subtle"},"256 ng\u01b0\u1eddi \u0111ang xem "))),o.a.createElement(i.Header.Right,null,o.a.createElement(p,null))))}function f(){var e=o.a.useState(),t=Object(c.a)(e,2),a=t[0],n=t[1];return o.a.useEffect((function(){var e=setInterval((function(){fetch("./youtubesource.json").then((function(e){return e.json()})).then((function(e){e.url!==a&&n(e.url)})).catch((function(e){console.error(e)}))}),1e3);return function(){return clearInterval(e)}}),[]),o.a.createElement("iframe",{width:"100%",height:"100%",src:a,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}var E=a(101),v=a.n(E),b=a(126),x=a(38),y=a(10),w=a.n(y),N=a(68),j=Object(N.a)(null,(function(){var e=g(),t=o.a.useState(null),a=Object(c.a)(t,2),n=a[0],r=a[1];return o.a.useEffect((function(){null===n||void 0===n||n.close();var t=e.jwtToken;return r(window.io("/",{query:"token=".concat(t)})),function(){n&&n.close()}}),[e]),n}));function S(e){var t=e.username,n=e.message,r=e.messageId,l=e.message_type,u=o.a.useState(!1),s=Object(c.a)(u,2),m=s[0],d=s[1],p=g(),h=j();return o.a.createElement("div",{className:"u-flex u-marginBottomExtraSmall u-paddingRightMedium u-positionRelative",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},o.a.createElement("div",{className:"u-flexShrink-0 u-marginRightExtraSmall"},o.a.createElement(i.Avatar,{src:a(255)})),o.a.createElement("div",{className:"u-flexGrow-1 u-text200 u-marginTopTiny u-textWordBreak"},o.a.createElement("span",{className:w()("u-fontBold u-marginRightExtraSmall u-textLight")},t),o.a.createElement("span",{className:w()("global"===l&&"u-textWarning")},n)),m&&o.a.createElement("div",{className:"u-positionAbsolute u-positionRight u-positionTop"},o.a.createElement(i.Dropdown,{alignRight:!0},o.a.createElement(i.Dropdown.Toggle,{className:"u-textLight hover:u-textGray u-lineHeightNone u-rotate90"},o.a.createElement(i.Icon,{size:"extraSmall",name:"more"})),o.a.createElement(i.Dropdown.Container,{className:"u-paddingVerticalExtraSmall",additionalStyles:{minWidth:150}},o.a.createElement(i.Dropdown.Item,{className:"u-cursorPointer u-alignItemsCenter",role:"button",onClick:function(){}},o.a.createElement(i.Icon,{name:"flag",size:"extraSmall"}),o.a.createElement("span",{className:"u-marginLeftExtraSmall u-text200 u-textNoWrap"},"B\xe1o c\xe1o vi ph\u1ea1m")),0===(null===p||void 0===p?void 0:p.role)&&o.a.createElement(i.Dropdown.Item,{className:"u-cursorPointer u-alignItemsCenter",role:"button"},o.a.createElement(i.Icon,{name:"closeCircleOutline",size:"extraSmall"}),o.a.createElement("span",{onClick:function(e){h&&h.emit("delete_message",r)},className:"u-marginLeftExtraSmall u-text200 u-textNoWrap"},"Xo\xe1 tin nh\u1eafn"))))))}function k(e){var t=e.message,a=e.type;return o.a.createElement("div",{className:w()("u-text200 u-fontItalic u-marginBottomExtraSmall","info"===a&&"u-textLight","error"===a&&"u-textNegative")},t)}var C={numUsers:0,numRooms:0,rooms:[]};var I=Object(N.a)(C,(function(){var e=o.a.useState(C),t=Object(c.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),l=Object(c.a)(r,2),i=l[0],u=l[1];return o.a.useEffect((function(){return function e(){fetch("/api/getRooms",{method:"GET",credentials:"same-origin",headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var a={numUsers:t.response.map((function(e){return e.count})).reduce((function(e,t){return e+t})),numRooms:t.response.length,rooms:t.response};n(a),i&&setTimeout((function(){return e()}),5e3)})).catch((function(t){console.error(t),i&&setTimeout((function(){return e()}),5e3)}))}(),function(){u(!1)}}),[]),a}));function B(e){var t=e.isSignedIn,a=e.isAdmin,n=(e.userData,o.a.useState(!1)),r=Object(c.a)(n,2),l=r[0],u=r[1],s=j(),m=I();return o.a.createElement(o.a.Fragment,null,t&&l&&o.a.createElement("div",{className:"u-positionAbsolute u-positionFull u-zIndexModal u-flex u-flexGrow-1 u-alignItemsCenter u-justifyContentCenter"},o.a.createElement("div",{className:"Modal-backDrop u-positionAbsolute u-positionFull u-backgroundBlack u-zIndex2 Show "}),o.a.createElement("div",{className:"u-positionRelative u-zIndex3 u-marginMedium"},o.a.createElement(i.Modal,{size:"small",relative:!0},o.a.createElement(i.Modal.Header,{closeButton:!0,onHide:function(){return u(!1)}}),o.a.createElement(i.Modal.Body,null,o.a.createElement("div",{className:"u-textCenter"},"Ch\u1ec9 \u0111\u01b0\u1ee3c chuy\u1ec3n ph\xf2ng t\u1ed1i \u0111a 1 l\u1ea7n trong 5 ph\xfat. B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n chuy\u1ec3n ph\xf2ng ch\u1ee9?")),o.a.createElement(i.Modal.Footer,null,o.a.createElement(i.Button,{variant:"primary",width:"full",onClick:function(){null===s||void 0===s||s.emit("join_random_room")}},"Chuy\u1ec3n ph\xf2ng"))))),o.a.createElement("div",{className:"u-flexShrink-0 u-flex u-alignItemsCenter u-justifyContentCenter"},!a&&o.a.createElement(i.Dropdown,{alignRight:!0},o.a.createElement(i.Dropdown.Button,{onlyIcon:!0,variant:"positive_outline",className:"u-roundedCircle u-marginRightExtraSmall is-disabled"},o.a.createElement(i.Button.Icon,null,o.a.createElement(i.Icon,{name:"raiseHand"}))),o.a.createElement(i.Dropdown.Container,{className:"u-overflowHidden u-borderNone"},o.a.createElement("div",{className:"u-paddingExtraSmall u-backgroundBlack u-textWhite"},"Ch\u1ee9c n\u0103ng gi\u01a1 tay s\u1ebd \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt trong c\xe1c phi\xean b\u1ea3n sau!"))),a&&o.a.createElement(i.Dropdown,{alignRight:!0},o.a.createElement(i.Overlay.Trigger,{key:"bottom",placement:"top",hoverOverlay:!0,delay:{show:0,hide:1},overlay:function(e){return o.a.createElement(i.Tooltip,Object.assign({id:"tooltip-choose-room"},e),"Ch\u1ecdn ph\xf2ng chat")}},o.a.createElement(i.Dropdown.Button,{onlyIcon:!0,variant:"primary",className:"u-roundedCircle u-marginRightExtraSmall"},o.a.createElement(i.Button.Icon,null,o.a.createElement(i.Icon,{name:"people"})))),o.a.createElement(i.Dropdown.Container,{className:"u-paddingVerticalExtraSmall"},m.rooms.map((function(e,t){return o.a.createElement(i.Dropdown.Item,{key:e.count,onClick:function(){return t=e.name,void(null===s||void 0===s||s.emit("join_room",t));var t},className:"u-cursorPointer"},o.a.createElement("span",{className:"u-marginLeftExtraSmall"},e.name))})))),o.a.createElement(i.Overlay.Trigger,{key:"bottom",placement:"top",hoverOverlay:!0,delay:{show:0,hide:1},overlay:function(e){return o.a.createElement(i.Tooltip,Object.assign({id:"tooltip-change-room"},e),"Chuy\u1ec3n ph\xf2ng chat kh\xe1c")}},o.a.createElement(i.Button,{onlyIcon:!0,variant:"accent",className:"u-roundedCircle",onClick:function(){return u(!0)}},o.a.createElement(i.Button.Icon,null,o.a.createElement(i.Icon,{name:"arrowForward"}))))))}function O(e){var t=e.message_type,a=e.payload;switch(e.action){case"new_member_joined":return o.a.createElement(k,{message:"".concat(a.username,' just joined the room "').concat(a.room,'"'),type:"info"});case"message":return o.a.createElement(S,{username:a.username,message:a.msg,messageId:a.message_id,message_type:t});case"api_message_highlight":return o.a.createElement(k,{message:a.response,type:"error"});case"api_message":return o.a.createElement(k,{message:a.response,type:"info"});default:return null}}function _(){var e=o.a.useState([]),t=Object(c.a)(e,2),n=t[0],r=t[1],l=o.a.useState(""),u=Object(c.a)(l,2),s=u[0],m=u[1],d=o.a.useState(null),p=Object(c.a)(d,2),h=p[0],f=p[1],E=o.a.useState(!1),y=Object(c.a)(E,2),w=y[0],N=y[1],S=j(),k=g(),C=I(),_=(null===k||void 0===k?void 0:k.isLoggedIn)&&0===(null===k||void 0===k?void 0:k.role),T=function(e){e&&e.preventDefault();var t=s.trim(),a="message";if(w)a="global_message";else if(s.includes("/join_room"))a="join_room",t=s.replace("/join_room ","").trim();else{if(s.includes("/report")){a="report";var o=s.replace("/report ","").trim();return fetch("/api/report?target_user=".concat(o),{method:"GET",credentials:"same-origin",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(k.jwtToken)}}).then((function(e){return e.json()})).then((function(e){console.log(e),n.push({payload:e,action:"api_message"}),r(Object(x.a)(n))})).catch((function(e){console.error(e)})),void setTimeout((function(){return m("")}),1)}if(s.includes("/unban")){a="unban";var l=s.replace("/unban ","").trim();fetch("/admin/unban?target_user=".concat(l),{method:"GET",credentials:"same-origin",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(k.jwtToken)}}).then((function(e){return e.json()})).then((function(e){console.log(e),n.push({payload:e,action:"api_message"}),r(Object(x.a)(n))})).catch((function(e){console.error(e)})),setTimeout((function(){return m("")}),1)}}null===S||void 0===S||S.emit(a,t),setTimeout((function(){return m("")}),1),N(!1)};return o.a.useEffect((function(){if(S)return S.on("message",(function(e){console.log(e),n.push({payload:e,message_type:e.type,action:"message"}),r(Object(x.a)(n))})),S.on("delete_message",(function(e){for(var t=0;t<n.length;++t)if("message"===n[t].action&&n[t].payload.message_id===e.message_id){n[t]={payload:{response:"Message was deleted by Admin"},action:"api_message_highlight"};break}r(Object(x.a)(n))})),S.on("new_member_joined",(function(e){n.push({payload:e,action:"new_member_joined"}),r(Object(x.a)(n))})),S.on("join_room_resp",(function(e){n.push({payload:e,action:"api_message"}),1===e.status&&f(e.room),r(Object(x.a)(n))})),function(){S&&S.close()}}),[S]),o.a.useEffect((function(){var e=document.querySelector(".ChatBox-list > div");e&&(e.scrollTop=e.scrollHeight)}),[n]),o.a.createElement(o.a.Fragment,null,!k.isLoggedIn&&o.a.createElement("div",{className:"u-positionAbsolute u-positionFull u-zIndexModal u-flex u-alignItemsEnd"},o.a.createElement("div",{className:"Modal-backDrop u-positionAbsolute u-positionFull u-backgroundBlack u-zIndex2 Show "}),o.a.createElement("div",{className:"u-positionRelative u-zIndex3 u-marginSmall u-marginBottomExtraLarge"},o.a.createElement(i.BubbleChat,{className:"u-marginNone",text:"Xin ch\xe0o, \u0111\u0103ng nh\u1eadp v\xe0o t\xe0i kho\xe0n STEAM for Vietnam LMS c\u1ee7a b\u1ea1n \u0111\u1ec3 b\u1ea5t \u0111\u1ea7u chat v\u1edbi c\xe1c th\xe0nh vi\xean kh\xe1c trong ph\xf2ng chat n\xe0y!",type:"outbound",avatar:function(){return o.a.createElement(i.Avatar,{className:"u-flexShrink-0 u-marginRightExtraSmall u-marginTopExtraSmall",src:a(256)})}}))),o.a.createElement("div",{className:"u-flex u-flexColumn u-flexGrow-1"},o.a.createElement("div",{className:"u-backgroundWhite u-borderTop u-borderLeft u-borderRight u-paddingExtraSmall u-text200 u-flex u-flexRow"},o.a.createElement("div",{className:"u-flexGrow-1"},o.a.createElement("div",null,o.a.createElement("span",null,"S\u1ed1 ng\u01b0\u1eddi \u0111ang chat:\xa0"),o.a.createElement("span",{className:"u-fontMedium"},C.numUsers)),o.a.createElement("div",null,o.a.createElement("span",null,"S\u1ed1 ph\xf2ng chat:\xa0"),o.a.createElement("span",{className:"u-fontMedium"},C.numRooms)),o.a.createElement("div",null,o.a.createElement("span",null,"Ph\xf2ng chat hi\u1ec7n t\u1ea1i:\xa0"),o.a.createElement("span",{className:"u-fontMedium"},h))),o.a.createElement(B,{isSignedIn:k.isLoggedIn,isAdmin:_,userData:k})),o.a.createElement(i.ChatBox,{className:"u-border u-backgroundWhite"},o.a.createElement(i.ChatBox.List,null,n.map((function(e,t){return o.a.createElement(O,Object.assign({key:t},e))}))),o.a.createElement(i.ChatBox.Context,null,o.a.createElement(i.Separator,{variant:"lighter"}),_&&o.a.createElement("div",{className:"u-paddingExtraSmall"},o.a.createElement(i.Form.Check,{id:"send_all",checked:w,label:"G\u1eedi cho t\u1ea5t c\u1ea3",onChange:function(){return N(!w)}})),o.a.createElement(i.Composer,{className:"u-borderTopNone",disabledAttachButton:!0,disabledSendButton:!1,sendButtonActive:""!==s.trim()&&k.isLoggedIn,onChange:function(e){return m(e.target.value)},inputProps:{value:s,maxRows:4,placeholder:"Tin nh\u1eafn cho l\u1edbp ...",disabled:!k.isLoggedIn,onKeyDown:function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:13!==(t.keyCode||t.which)||t.shiftKey||""===s.trim()||(t.preventDefault(),T(void 0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},sendButtonProps:{onClick:T}})))))}var T=function(){return o.a.createElement(i.PageLayout,{style:{height:"100vh"}},o.a.createElement(i.PageLayout.Header,{className:"u-borderBottom"},o.a.createElement(h,null)),o.a.createElement(i.PageLayout.Body,{className:"u-overflowVerticalAuto u-webkitScrollbar"},o.a.createElement("div",{className:"Container Container--fluid u-paddingTopMedium u-paddingBottomSmall u-flex u-flexColumn u-backgroundOpaline"},o.a.createElement("div",{className:"Grid Grid--smallGutter u-flexGrow-1"},o.a.createElement("div",{className:"u-size9of12"},o.a.createElement(f,null)),o.a.createElement("div",{className:"u-size3of12 u-flex u-positionRelative"},o.a.createElement(_,null))))))};a(257),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(270);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L.a,null,o.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[128,1,2]]]);
//# sourceMappingURL=main.ebbdc6ff.chunk.js.map